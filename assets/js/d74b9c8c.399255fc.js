"use strict";(self.webpackChunkpiwik_pro=self.webpackChunkpiwik_pro||[]).push([[7086],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,d=u["".concat(s,".").concat(m)]||u[m]||k[m]||o;return a?n.createElement(d,i(i({ref:t},c),{},{components:a})):n.createElement(d,i({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},92942:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>k,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const o={},i="Authorization",l={unversionedId:"web-api/getting-started/authorization",id:"web-api/getting-started/authorization",title:"Authorization",description:"If you want to access API for the first time, you need to generate your API credentials and use them to create an access token. The token is needed to authenticate API calls.",source:"@site/docs/web-api/getting-started/authorization.md",sourceDirName:"web-api/getting-started",slug:"/web-api/getting-started/authorization",permalink:"/docs/web-api/getting-started/authorization",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/web-api/getting-started/authorization.md",tags:[],version:"current",frontMatter:{},sidebar:"webApiSideBar",previous:{title:"Getting started",permalink:"/docs/web-api/getting-started/"},next:{title:"FAQ",permalink:"/docs/web-api/getting-started/faq"}},s={},p=[{value:"Create API keys",id:"create-api-keys",level:2},{value:"Create an access token",id:"create-an-access-token",level:2},{value:"Delete API keys",id:"delete-api-keys",level:2}],c={toc:p},u="wrapper";function k(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"authorization"},"Authorization"),(0,r.kt)("p",null,"If you want to access API for the first time, you need to generate your API credentials and use them to create an access token. The token is needed to authenticate API calls."),(0,r.kt)("p",null,"Our API uses ",(0,r.kt)("a",{parentName:"p",href:"https://www.oauth.com/oauth2-servers/access-tokens/client-credentials/"},"client credentials")," (OAuth grant type) for obtaining a user token. All data is sent and received as JSON and is compliant with the ",(0,r.kt)("a",{parentName:"p",href:"http://jsonapi.org/"},"JSON API")," specification."),(0,r.kt)("h2",{id:"create-api-keys"},"Create API keys"),(0,r.kt)("p",null,"To create API keyes, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Log in to ",(0,r.kt)("a",{parentName:"li",href:"https://piwik.pro/login/"},"Piwik PRO"),"."),(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Menu")," ",">"," ",(0,r.kt)("strong",{parentName:"li"},"Profile"),"."),(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("strong",{parentName:"li"},"API keys"),"."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Create a key"),"."),(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("strong",{parentName:"li"},"Name")," and click ",(0,r.kt)("strong",{parentName:"li"},"OK"),"."),(0,r.kt)("li",{parentName:"ol"},"Copy ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," and ",(0,r.kt)("strong",{parentName:"li"},"Client secret"),". They won\u2019t be available after you close this window.")),(0,r.kt)("p",null,"Note: Credentials are valid until they are deleted in ",(0,r.kt)("strong",{parentName:"p"},"Profile"),"."),(0,r.kt)("h2",{id:"create-an-access-token"},"Create an access token"),(0,r.kt)("p",null,"To create an access token, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Piwik PRO API tokens use ",(0,r.kt)("a",{parentName:"p",href:"https://jwt.io/"},"JWT")," format.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Make a call:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'      curl -X POST \'https://<example>/auth/token\' -H "Content-Type: application/json" --data \'{\n      "grant_type": "client_credentials",\n      "client_id": "<client_id>",\n      "client_secret": "<client_secret>"\n      }\'\n')),(0,r.kt)("p",{parentName:"li"},"Note: If you are the ",(0,r.kt)("a",{parentName:"p",href:"https://piwik.pro/core-plan/"},"Core plan")," user, replace ","<","example",">"," with ","<","your_account_name",">",".piwik.pro.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Response example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'  {"token_type":"Bearer","expires_in":1800,"access_token":"<your_access_token>"}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Now you can use ","<","your_access_token",">"," to communicate with Piwik PRO API. The token is a Bearer type, so you need to include it within the header in every API call.  "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"  Authorization: Bearer <your_access_token>\n")),(0,r.kt)("p",{parentName:"li"},"Note: Every token is valid for 30 minutes. expires_in shows the expiration time in seconds."))),(0,r.kt)("h2",{id:"delete-api-keys"},"Delete API keys"),(0,r.kt)("p",null,"If you no longer want to use generated API credentials in access tokens, you need to delete them."),(0,r.kt)("p",null,"To delete API credentials, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Log in to ",(0,r.kt)("a",{parentName:"li",href:"https://piwik.pro/login/"},"Piwik PRO"),"."),(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Menu")," ",">"," ",(0,r.kt)("strong",{parentName:"li"},"Profile"),"."),(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("strong",{parentName:"li"},"API keys"),"."),(0,r.kt)("li",{parentName:"ol"},"Choose credentials that you want to revoke and click ",(0,r.kt)("strong",{parentName:"li"},"X"),".")))}k.isMDXComponent=!0}}]);