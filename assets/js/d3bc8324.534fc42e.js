"use strict";(self.webpackChunkpiwik_pro=self.webpackChunkpiwik_pro||[]).push([[6429],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(a),k=i,d=c["".concat(s,".").concat(k)]||c[k]||m[k]||r;return a?n.createElement(d,l(l({ref:t},u),{},{components:a})):n.createElement(d,l({ref:t},u))}));function d(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=k;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},1010:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(7462),i=(a(7294),a(3905));const r={},l="Piwik PRO SDK for React Native",o={unversionedId:"data-collection/mobile/Piwik_PRO_SDK_for_React_Native",id:"data-collection/mobile/Piwik_PRO_SDK_for_React_Native",title:"Piwik PRO SDK for React Native",description:"Piwik PRO SDK for React Native",source:"@site/docs/data-collection/mobile/Piwik_PRO_SDK_for_React_Native.md",sourceDirName:"data-collection/mobile",slug:"/data-collection/mobile/Piwik_PRO_SDK_for_React_Native",permalink:"/docs/data-collection/mobile/Piwik_PRO_SDK_for_React_Native",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data-collection/mobile/Piwik_PRO_SDK_for_React_Native.md",tags:[],version:"current",frontMatter:{},sidebar:"dataCollectionSideBar",previous:{title:"Piwik PRO SDK for Flutter",permalink:"/docs/data-collection/mobile/Piwik_PRO_SDK_for_Flutter"},next:{title:"Piwik PRO SDK for iOS",permalink:"/docs/data-collection/mobile/Piwik_PRO_SDK_for_iOS"}},s={},p=[{value:"Installation",id:"installation",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Using Piwik PRO SDK",id:"using-piwik-pro-sdk",level:2},{value:"Data anonymization",id:"data-anonymization",level:3},{value:"Tracking screen views",id:"tracking-screen-views",level:3},{value:"Tracking custom events",id:"tracking-custom-events",level:3},{value:"Tracking exceptions",id:"tracking-exceptions",level:3},{value:"Tracking social interactions",id:"tracking-social-interactions",level:3},{value:"Tracking downloads",id:"tracking-downloads",level:3},{value:"Tracking outlinks",id:"tracking-outlinks",level:3},{value:"Tracking search operations",id:"tracking-search-operations",level:3},{value:"Tracking content impressions and interactions",id:"tracking-content-impressions-and-interactions",level:3},{value:"Tracking goals",id:"tracking-goals",level:3},{value:"Tracking ecommerce transactions",id:"tracking-ecommerce-transactions",level:3},{value:"Tracking campaigns",id:"tracking-campaigns",level:3},{value:"Tracking custom variables",id:"tracking-custom-variables",level:3},{value:"Tracking custom dimensions",id:"tracking-custom-dimensions",level:3},{value:"Tracking user profile attributes",id:"tracking-user-profile-attributes",level:3},{value:"Reading user profile attributes",id:"reading-user-profile-attributes",level:3},{value:"Checking audience membership",id:"checking-audience-membership",level:3},{value:"Advanced usage",id:"advanced-usage",level:2},{value:"User ID",id:"user-id",level:3},{value:"User email address",id:"user-email-address",level:3},{value:"Visitor ID",id:"visitor-id",level:3},{value:"Sessions",id:"sessions",level:3},{value:"Dispatching",id:"dispatching",level:3},{value:"Default custom variables",id:"default-custom-variables",level:3},{value:"Opt out",id:"opt-out",level:3},{value:"Dry run",id:"dry-run",level:3},{value:"Prefixing",id:"prefixing",level:3},{value:"License",id:"license",level:2}],u={toc:p},c="wrapper";function m(e){let{components:t,...a}=e;return(0,i.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"piwik-pro-sdk-for-react-native"},"Piwik PRO SDK for React Native"),(0,i.kt)("p",null,"Piwik PRO SDK for React Native"),(0,i.kt)("h3",{id:"installation"},"Installation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @piwikpro/react-native-piwik-pro-sdk\n")),(0,i.kt)("h3",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"In order to set up the Piwik PRO tracker you have to call ",(0,i.kt)("inlineCode",{parentName:"p"},"init")," method passing a server address and website ID (you can find it in ",(0,i.kt)("inlineCode",{parentName:"p"},"Administration")," -> ",(0,i.kt)("inlineCode",{parentName:"p"},"Sites & apps"),"):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import PiwikProSdk from \"@piwikpro/react-native-piwik-pro-sdk\";\n\n// ...\n\nawait PiwikProSdk.init('https://your.piwik.pro.server.com', '01234567-89ab-cdef-0123-456789abcdef')\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"serverAddress: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 URL of your Piwik PRO server."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"websiteId: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 ID of your website or application.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Note:"))," Each tracking method is implemented as a Promise which will be rejected if the ",(0,i.kt)("inlineCode",{parentName:"p"},"PiwikProSdk")," has not been initialized."),(0,i.kt)("h2",{id:"using-piwik-pro-sdk"},"Using Piwik PRO SDK"),(0,i.kt)("h3",{id:"data-anonymization"},"Data anonymization"),(0,i.kt)("p",null,"Anonymization is the feature that allows tracking a user\u2019s activity for aggregated data analysis even if the user doesn\u2019t consent to track the data. If a user does not agree to be tracked, he will not be identified as the same person across multiple sessions."),(0,i.kt)("p",null,"Personal data will not be tracked during the session (i.e. user ID, device ID). If the anonymization is enabled, a new visitor ID will be created each time the application starts."),(0,i.kt)("p",null,"Anonymization is enabled by default."),(0,i.kt)("p",null,"You can turn the anonymization on and off using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setAnonymizationState")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setAnonymizationState(false);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"anonymizationState: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 new anonymization state.")),(0,i.kt)("p",null,"You can also check the anonymization status using the ",(0,i.kt)("inlineCode",{parentName:"p"},"isAnonymizationOn")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const anonymizationState = await PiwikProSdk.isAnonymizationOn();\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"anonymizationState: boolean")," \u2013 current anonymization state.")),(0,i.kt)("h3",{id:"tracking-screen-views"},"Tracking screen views"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"During a valid tracking session, you can track screen views which represent the content the user is viewing in the application. To track a screen you only need to provide the screen path. This path is internally translated by the SDK to an HTTP URL as the Piwik PRO server uses URLs for tracking views. Additionally, Piwik PRO SDK uses prefixes which are inserted in a generated URL for various types of action(s). For tracking screen views it will use a prefix ",(0,i.kt)("inlineCode",{parentName:"p"},"'screen'")," by default, however, ",(0,i.kt)("a",{parentName:"p",href:"#prefixing"},"automatic prefixing")," can be disabled with the ",(0,i.kt)("inlineCode",{parentName:"p"},"setPrefixing(false)")," option."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  title: 'actionTitle',\n  customDimensions: { 1: 'some custom dimension value' },\n};\nawait PiwikProSdk.trackScreen(`your_screen_path`, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 screen path (it will be mapped to the URL path)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 screen tracking options, object containing four properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"title: string")," \u2013 the title of the action being tracked (it will be omitted in iOS application)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"screenCustomVariables")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"screen custom variables"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-custom-events"},"Tracking custom events"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"To collect data about the user\u2019s interaction with the interactive components of the application, like a button presses or the use of a particular item in the game \u2013 use event method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  name: 'customEvent',\n  path: 'some/path',\n  value: 1.5,\n  customDimensions: { 1: 'some custom dimension value' },\n}\nawait PiwikProSdk.trackCustomEvent(`custom_event`, 'custom_event_action', options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"category: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 event category. You may define event categories based on the class of user actions (e.g. clicks, gestures, voice commands), or you may define them based on the features available in your application (e.g. play, pause, fast forward, etc.)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"action: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 specific event action within the category specified. In the example, we are effectively saying that the category of the event is user clicks, and the action is a button click."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 custom event options, object containing five properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name: string")," \u2013 label associated with the event. For example, if you have multiple button controls on a screen, you may use the label to specify the specific view control identifier that was clicked."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value: number")," \u2013 float, numerical value associated with the event. For example, if you were tracking 'Buy' button clicks, you may log the number of items being purchased or their total cost."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path: string")," \u2013 the path under which this event occurred (it will be omitted in iOS application)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("p",null,"For more resources, please visit ",(0,i.kt)("a",{parentName:"p",href:"https://help.piwik.pro/support/tag-manager/piwik-pro-custom-event/"},"documentation"),"."),(0,i.kt)("h3",{id:"tracking-exceptions"},"Tracking exceptions"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"Caught exceptions are errors in your app for which you\u2019ve defined an exception handling code, such as the occasional timeout of a network connection during a request for data. Exceptions are tracked on the server in a similar way as screen views, however, action internally generated for exceptions always uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"'fatal'")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"'caught'")," ",(0,i.kt)("a",{parentName:"p",href:"#prefixing"},"prefix"),", and additionally the ",(0,i.kt)("inlineCode",{parentName:"p"},"'exception'")," prefix if ",(0,i.kt)("inlineCode",{parentName:"p"},"isPrefixingOn()")," option is enabled (",(0,i.kt)("inlineCode",{parentName:"p"},"true"),")."),(0,i.kt)("p",null,"Measure a caught exception by setting the exception field values on the tracker and sending the hit, as with this example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  visitCustomVariables: { 4: { name: 'food', value: 'pizza' } },\n  customDimensions: { 1: 'some custom dimension value' },\n};\nawait PiwikProSdk.trackException('exception', false, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"description: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the exception message."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isFatal: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 true if an exception is fatal. Determines whether the exception prefix will be ",(0,i.kt)("inlineCode",{parentName:"li"},"'fatal'")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"'caught'"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 exception tracking options, object containing two properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-social-interactions"},"Tracking social interactions"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"Social interactions such as likes, shares and comments in various social networks can be tracked as below. This, again, is tracked in a similar way as with screen views but the ",(0,i.kt)("inlineCode",{parentName:"p"},"'social'")," ",(0,i.kt)("a",{parentName:"p",href:"#prefixing"},"prefix")," is used when the default ",(0,i.kt)("inlineCode",{parentName:"p"},"isPrefixing()")," option is enabled."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  visitCustomVariables: { 4: { name: 'food', value: 'pizza' } },\n  target: 'Photo',\n};\nawait PiwikProSdk.trackSocialInteraction(`Like`, 'Facebook', options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"interaction: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the social interaction, e.g. 'Like'."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"network: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 social network associated with interaction, e.g. 'Facebook'."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 social interaction tracking options, object containing three properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"target: string")," \u2013 the target for which this interaction occurred, e.g. 'Photo'."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 the object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("p",null,"The generated URL corresponds to string, which includes the network, interaction and target parameters separated by slash."),(0,i.kt)("h3",{id:"tracking-downloads"},"Tracking downloads"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"You can track the downloads initiated by your application:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackDownload(`http://your.server.com/bonusmap.zip`, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"url: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 URL of the downloaded content."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 download tracking options, object containing two properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("p",null,"All downloads can be viewed in the corresponding section in the analytics panel."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Note:"))," Generated URLs may differ between Android and iOS."),(0,i.kt)("h3",{id:"tracking-outlinks"},"Tracking outlinks"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"For tracking outlinks to external websites or other apps opened from your application use the ",(0,i.kt)("inlineCode",{parentName:"p"},"trackOutlink")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackOutlink(`http://your.server.com/bonusmap.zip`, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"URL ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 outlink target. HTTPS, HTTP and FTP are valid."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 outlinks tracking options, object containing two properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-search-operations"},"Tracking search operations"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"Tracking search operations allow the measurement of popular keywords used for various search operations performed inside your application. It can be done via the ",(0,i.kt)("inlineCode",{parentName:"p"},"trackSearch")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  category: `Movies`,\n  count: 3,\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackSearch('Space', options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"keyword: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 searched query that was used in the app."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 search tracking options, object containing four properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"category: string")," \u2013 search category."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"count: number")," \u2013 we recommend setting the search count to the number of search results displayed on the results page. When keywords are tracked with a count of 0, they will appear in the 'No Result Search Keyword' report."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-content-impressions-and-interactions"},"Tracking content impressions and interactions"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"You can track an impression of an ad in your application as below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  piece: 'banner',\n  target: 'https://www.dn.se/',\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackImpression('Some content impression', options);\n")),(0,i.kt)("p",null,"When the user interacts with the ad by tapping on it, you can also track it with a similar method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  piece: 'banner',\n  target: 'https://www.dn.se/',\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackInteraction('Some content interaction', options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentName: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 name of the content, e.g. 'Ad Foo Bar'."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 impression tracking options, object containing four properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"piece: string")," \u2013 actual content. For instance, path to the image, video, audio or any text."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"target: string")," \u2013 the target of the content. For instance the URL of a landing page."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-goals"},"Tracking goals"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"Goal tracking is used to measure and improve your business objectives. To track goals, you first need to configure them on the server in your web panel. Goals such as, for example, subscribing to a newsletter can be tracked as below with the goal ID that you will see on the server after configuring the goal and optional revenue. The currency for the revenue can be set in the Piwik PRO Analytics settings. You can read more about goals ",(0,i.kt)("a",{parentName:"p",href:"https://help.piwik.pro/support/analytics/goals/"},"here"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  revenue: 30,\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackGoal(1, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"goal: number")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 tracking request will trigger a conversion for the goal of the website being tracked with this ID."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 goal tracking options, object containing three properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"revenue: number")," \u2013 monetary value that was generated as revenue by this goal conversion."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-ecommerce-transactions"},"Tracking ecommerce transactions"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"Ecommerce transactions (in-app purchases) can be tracked to help you improve your business strategy. To track a transaction you must provide two required values \u2013 the transaction identifier and grandTotal. Optionally, you can also provide values for subTotal, tax, shippingCost, discount and list of purchased items as in the example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options: TrackEcommerceOptions = {\n  discount: 0,\n  shipping: 1000,\n  subTotal: 33110,\n  tax: 9890,\n  items: [\n    {\n      sku: '0123456789012',\n      category: \"Men's T-shirts\",\n      name: 'Polo T-shirt',\n      price: 3000,\n      quantity: 2,\n    },\n  ],\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackEcommerce('order_1', 124144, options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderId: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 unique string identifying the order."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"grandTotal: number")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 total amount of the order, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 goal tracking options, object containing five properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"subTotal: number")," \u2013 subtotal (net price) for the order, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tax: number")," \u2013 tax for the order, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"shipping: number")," \u2013 shipping for the order, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"discount: number")," \u2013 discount for the order, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"items")," \u2013 items included in the order, array of objects containing five required properties:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sku: string")," \u2013 identifier of the item."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name: string")," \u2013 name of the item."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"category: string")," \u2013 category of the item."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"price: string")," \u2013 price of the single item, in cents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"quantity: string")," \u2013 quantity of the item."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("h3",{id:"tracking-campaigns"},"Tracking campaigns"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://piwik.pro/glossary/campaign-tracking/"},"Tracking campaigns")," URLs configured with the online ",(0,i.kt)("a",{parentName:"p",href:"https://piwik.pro/url-builder-tool/"},"Campaign URL Builder")," tool allow you to measure how different campaigns (for example with Facebook ads or direct emails) bring traffic to your application:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  visitCustomVariables: 4: { name: 'food', value: 'pizza' },\n  customDimensions: { 1: 'beta', 2: 'gamma', },\n};\nawait PiwikProSdk.trackCampaign('http://example.org/offer.html?pk_campaign=Email-SummerDeals&pk_keyword=LearnMore', options);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"url: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the campaign URL. HTTPS, HTTP and FTP are valid, however, the URL must contain campaign name and keyword parameters."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," \u2013 campaign tracking options, object containing two properties (all of them are optional):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensions")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-dimensions"},"custom dimensions"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitCustomVariables")," \u2013 object specifying ",(0,i.kt)("a",{parentName:"li",href:"#tracking-custom-variables"},"visit custom variables"),".")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Note:"))," On iOS the campaign information will be sent to the server together with the next analytics event."),(0,i.kt)("h3",{id:"tracking-custom-variables"},"Tracking custom variables"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"The feature will soon be disabled. We recommend using ",(0,i.kt)("a",{parentName:"em",href:"#tracking-custom-dimensions"},"custom dimensions")," instead.")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"https://piwik.pro/glossary/custom-variables/"},"custom variable")," is a custom name-value pair that you can assign to your users or screen views, and then visualize the reports of how many visits, conversions, etc. occurred for each custom variable. A custom variable is defined by a name \u2013 for example, 'User status' \u2013 and a value \u2013 for example, 'LoggedIn' or 'Anonymous'. It is required for names and values to be encoded in UTF-8."),(0,i.kt)("p",null,"Each custom variable has a scope. There are two types of custom variables scope \u2013 visit scope and screen scope. The visit scope can be used for any tracking action, and the screen scope can only be applied to tracking screen views."),(0,i.kt)("p",null,"To set the custom variable of the screen scope, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"screenCustomVariables")," object, for the visit scope \u2013 ",(0,i.kt)("inlineCode",{parentName:"p"},"visitCustomVariables")," in the screen tracking method options:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const options = {\n  screenCustomVariables: { 4: { name: 'food', value: 'pizza' } },\n  visitCustomVariables: { 5: { name: 'drink', value: 'water' } },\n};\nawait PiwikProSdk.trackScreen(`your_screen_path`, options);\n")),(0,i.kt)("p",null,"Please note that for the ",(0,i.kt)("a",{parentName:"p",href:"#default-custom-variables"},"Default custom variables")," option, use the custom variables of the visit scope with indexes 1-3.\nCustom variables of each scope is the object with the following format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const customVariables = {\n  4: { name: 'food', value: 'pizza' },\n  5: { name: 'drink', value: 'water' },\n}\n")),(0,i.kt)("p",null,"where:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"index: number"),", the key ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 a given custom variable name must always be stored in the same 'index' per session. For example, if you choose to store the variable with name 'Gender' in index  ",(0,i.kt)("inlineCode",{parentName:"li"},"1")," and you record another custom variable in index ",(0,i.kt)("inlineCode",{parentName:"li"},"1"),", then the 'Gender' variable will be deleted and replaced with a new custom variable stored in index ",(0,i.kt)("inlineCode",{parentName:"li"},"1"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the name of a specific custom variable such as 'User type' (Limited to 200 characters)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the value of a specific custom variable such as 'Customer' (Limited to 200 characters).")),(0,i.kt)("h3",{id:"tracking-custom-dimensions"},"Tracking custom dimensions"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Analytics")),(0,i.kt)("p",null,"To track a custom key-value pair assigned to your users or screen views, use ",(0,i.kt)("a",{parentName:"p",href:"https://help.piwik.pro/support/analytics/custom-dimension/"},"custom dimensions"),". Note that the custom value data is not sent by itself, but only with other tracking actions such as screen views, events or other tracking actions (see the documentation of other tracking methods), for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const customDimensions = {\n  1: 'dashboard',\n  2: 'menu',\n}\nawait PiwikProSdk.trackScreen(`your_screen_path`, { customDimensions });\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"2")," are dimension IDs. ",(0,i.kt)("inlineCode",{parentName:"p"},"dashboard"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"menu")," are the dimension values for the tracked screen view event."),(0,i.kt)("h3",{id:"tracking-user-profile-attributes"},"Tracking user profile attributes"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Audience Manager")),(0,i.kt)("p",null,"The Audience Manager stores visitors\u2019 profiles which have data from a variety of sources. One of them can be a mobile application. It is possible to enrich the profiles with more attributes by passing any key-value pair e.g. gender: male, favourite food: Italian, etc. It is recommended to set additional user identifiers such as ",(0,i.kt)("a",{parentName:"p",href:"#user-email-address"},"email")," or ",(0,i.kt)("a",{parentName:"p",href:"#user-id"},"user ID")," which will allow the enrichment of existing profiles or merging of profiles rather than creating a new profile. For example, if the user visited the website, performed some actions, filled in a form with his email (his data was tracked and profile created in Audience Manager) and afterwards started using a mobile application, the existing profile will be enriched only if the email was set. Otherwise, a new profile will be created."),(0,i.kt)("p",null,"For sending profile attributes use ",(0,i.kt)("inlineCode",{parentName:"p"},"trackProfileAttributes")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const profileAttributes: TrackProfileAttributes = [\n  { name: 'food', value: 'pizza' },\n  { name: 'drink', value: 'water' },\n];\n// Profile attributes can be also a single object:\n// const profileAttributes: TrackProfileAttributes = { name: 'food', value: 'pizza' };\nawait PiwikProSdk.trackProfileAttributes(profileAttributes);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"profileAttributes")," \u2013 an object or an array of objects with two required properties:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 profile attribute name."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 the profile attribute value.")))),(0,i.kt)("p",null,"Aside from attributes, each event also sends parameters which are retrieved from the tracker instance:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"WEBSITE_ID")," \u2013 always sent."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"USER_ID")," \u2013 if set. Read more about the ",(0,i.kt)("a",{parentName:"li",href:"#user-id"},"User ID"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"EMAIL")," \u2013 if set. Read more about the ",(0,i.kt)("a",{parentName:"li",href:"#user-email-address"},"email"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"VISITOR_ID")," \u2013 always sent, ID of the mobile application user, generated by the SDK."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DEVICE_ID")," \u2013 Advertising ID that, by default, is fetched automatically when the tracker instance is created (only on Android).")),(0,i.kt)("p",null,"Profile attributes for the user that are tracked will be shown on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Audience Manager")," -> ",(0,i.kt)("inlineCode",{parentName:"p"},"Profile Browser")," tab."),(0,i.kt)("h3",{id:"reading-user-profile-attributes"},"Reading user profile attributes"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Audience Manager")),(0,i.kt)("p",null,"It is possible to read the attributes of a given profile, however, with some limitations. Due to security reasons (to avoid personal data leakage), it is possible to read only attributes that were enabled for API access (whitelisted) in the Attributes section in the Audience Manager. You can get user profile attributes in the following manner:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const attributes = await PiwikProSdk.getProfileAttributes();\nconsole.log(attributes);\n// {"device_type": "desktop", ...}\n')),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"attributes: object")," \u2013 dictionary of key-value pairs, where each pair represents the attribute name (key) and value. In case of error (for example when user profile does not yet exist), returns error message.")),(0,i.kt)("h3",{id:"checking-audience-membership"},"Checking audience membership"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Requires Audience Manager")),(0,i.kt)("p",null,"Audiences are allowed to check whether or not the user belongs to a specific group of users defined in the data manger panel based on analytics data and audience manager profile attributes. You can check if the user belongs to a given audience, for example, to show a special offer. To check it, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"checkAudienceMembership")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const audienceId = 'a83d4aac-faa6-4746-96eb-5ac110083f8e';\nconst isMember = await PiwikProSdk.checkAudienceMembership(audienceId);\nconsole.log(isMember);\n// true\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"audienceId: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 ID of the audience (Audience Manager -> Audiences).")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isMember: boolean")," \u2013 value indicating whether user belongs to the audience with given ID or error message if an error occurred.")),(0,i.kt)("h2",{id:"advanced-usage"},"Advanced usage"),(0,i.kt)("h3",{id:"user-id"},"User ID"),(0,i.kt)("p",null,"The user ID is an additional, optional non-empty unique string identifying the user (not set by default). It can be, for example, a unique username or user\u2019s email address. If the provided user ID is sent to the analytics part together with the visitor ID, it allows the association of events from various platforms (for example iOS and Android) to the same user provided that the same user ID is used on all platforms. More about ",(0,i.kt)("a",{parentName:"p",href:"https://help.piwik.pro/support/getting-started/userid/"},"user ID"),". In order to set user ID use the ",(0,i.kt)("inlineCode",{parentName:"p"},"setUserId")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'await PiwikProSdk.setUserId("John Doe");\n')),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"userId: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 any non-empty unique string identifying the user. Passing null will delete the current user ID.")),(0,i.kt)("p",null,"You can obtain current user ID value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserId"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentUserId = await PiwikProSdk.getUserId(); \n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"userId: string")," \u2013 current user ID.")),(0,i.kt)("h3",{id:"user-email-address"},"User email address"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Used only by Audience Manager")),(0,i.kt)("p",null,"The user email address is an optional parameter for user identification. Similar to ",(0,i.kt)("a",{parentName:"p",href:"#user-id"},"user ID"),", it allows the association of events from various sources to the same user. To set user email use the ",(0,i.kt)("inlineCode",{parentName:"p"},"setUserEmail")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setUserEmail('john@doe.com');\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"email: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 non-empty string representing email address.")),(0,i.kt)("p",null,"Setting up an email helps the Audience Manager to enrich existing profiles or merge profiles which come from other sources (if they also have an email). Check ",(0,i.kt)("a",{parentName:"p",href:"#tracking-user-profile-attributes"},"Tracking user profile attributes")," for more information."),(0,i.kt)("p",null,"You can obtain current user email value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserEmail"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentUserEmail = await PiwikProSdk.getUserEmail(); \n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"email: string")," \u2013 current user email.")),(0,i.kt)("h3",{id:"visitor-id"},"Visitor ID"),(0,i.kt)("p",null,"To track user sessions on different sources, the visitor ID parameter is used. Visitor ID is randomly generated when the tracker instance is created, and stored between application launches. It is also possible to reset the visitor ID manually:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'await PiwikProSdk.setVisitorId("0123456789abcdef");\n')),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitorId: string")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 unique visitor ID, must be 16 characters hexadecimal string.")),(0,i.kt)("p",null,"Every unique visitor must be assigned a different ID and this ID must not change after it is assigned. We recommend using ",(0,i.kt)("a",{parentName:"p",href:"#user-id"},"user ID")," instead of visitor ID."),(0,i.kt)("p",null,"You can check current visitor ID value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getVisitorId"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentVisitorId = await PiwikProSdk.getVisitorId(); \n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitorId: string")," \u2013 current visitor ID.")),(0,i.kt)("h3",{id:"sessions"},"Sessions"),(0,i.kt)("p",null,"A session represents a set of user\u2019s interactions with your app. By default, Analytics is closing the session after 30 minutes of inactivity, counting from the last recorded event in session and when the user will open up the app again the new session is started. You can configure the tracker to automatically close the session when users have placed your app in the background for a period of time. That period is defined by the ",(0,i.kt)("inlineCode",{parentName:"p"},"setSessionTimeout"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setSessionTimeout(1800);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionTimeout: number")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 session timeout time in seconds. Default: 1800 seconds (30 minutes).")),(0,i.kt)("p",null,"You can obtain current ",(0,i.kt)("inlineCode",{parentName:"p"},"sessionTimeout")," value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getSessionTimeout"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentSessionTimeout = await PiwikProSdk.getSessionTimeout();\nconsole.log(currentSessionTimeout); // 1800\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionTimeout: number")," \u2013 current session timeout value in seconds.")),(0,i.kt)("p",null,"You can manually start a new session when sending a hit to Piwik by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"startNewSession")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.startNewSession();\n")),(0,i.kt)("h3",{id:"dispatching"},"Dispatching"),(0,i.kt)("p",null,"Tracked events are stored temporarily on the queue and dispatched in batches every 30 seconds (default setting). This behavior can be changed in the following way:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const dispatchInterval = 25; // 25 seconds\nawait PiwikProSdk.setDispatchInterval(dispatchInterval);    \n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dispatchInterval: number")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 new dispatch interval (in seconds).")),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"dispatchValue")," is equal to ",(0,i.kt)("inlineCode",{parentName:"p"},"0")," then events will be dispatched immediately. When its value is negative then events will not be dispatched automatically. This gives you full control over dispatch process using manual ",(0,i.kt)("inlineCode",{parentName:"p"},"dispatch"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.dispatch();    \n")),(0,i.kt)("p",null,"You can obtain current ",(0,i.kt)("inlineCode",{parentName:"p"},"dispatchInterval")," value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getDispatchInterval"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentDispatchInterval = await PiwikProSdk.getDispatchInterval(); \n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dispatchInterval: number")," \u2013 current dispatch interval (in seconds) or negative number if automatic dispatch has been disabled.")),(0,i.kt)("h3",{id:"default-custom-variables"},"Default custom variables"),(0,i.kt)("p",null,"SDK can automatically add information about the platform version, OS version and app version in custom variables with indexes 1-3. By default, this option is turned on. This can be changed via the ",(0,i.kt)("inlineCode",{parentName:"p"},"setIncludeDefaultCustomVars")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setIncludeDefaultCustomVariables(true);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"includeDefaultCustomVariables: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 flag that determines whether default custom variables should be added to each tracking event.")),(0,i.kt)("p",null,"The status of the option can be checked with ",(0,i.kt)("inlineCode",{parentName:"p"},"getIncludeDefaultCustomVariables"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const includeDefaultCustomVariables = await PiwikProSdk.getIncludeDefaultCustomVariables();\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"includeDefaultCustomVariables: boolean")," \u2013 flag that determines whether default custom variables should be added to each tracking event.")),(0,i.kt)("h3",{id:"opt-out"},"Opt out"),(0,i.kt)("p",null,"You can set an app-level opt-out flag that will disable Piwik PRO tracking across the entire app. Note that this flag must be set each time the app starts up and by default is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),". To enable the app-level opt-out, use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setOptOut(true);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"optOut: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 flag that determines whether opt-out is enabled.")),(0,i.kt)("p",null,"You can obtain current ",(0,i.kt)("inlineCode",{parentName:"p"},"optOut")," value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getOptOut"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentOptOutState = await PiwikProSdk.getOptOut();\nconsole.log(currentOptOutState); // false\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"optOut: boolean")," \u2013 current opt-out state.")),(0,i.kt)("h3",{id:"dry-run"},"Dry run"),(0,i.kt)("p",null,"The SDK provides a ",(0,i.kt)("inlineCode",{parentName:"p"},"dryRun")," flag that, when set, prevents any data from being sent to Piwik. The ",(0,i.kt)("inlineCode",{parentName:"p"},"dryRun")," flag should be set whenever you are testing or debugging an implementation and do not want test data to appear in your Piwik reports. To set the ",(0,i.kt)("inlineCode",{parentName:"p"},"dryRun")," flag, use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setDryRun(true);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dryRun: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 flag that determines whether dry run is enabled.")),(0,i.kt)("p",null,"You can obtain current ",(0,i.kt)("inlineCode",{parentName:"p"},"dryRun")," value with ",(0,i.kt)("inlineCode",{parentName:"p"},"getDryRun"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentDryRunState = await PiwikProSdk.getDryRun();\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dryRun: boolean")," \u2013 current dry run state.")),(0,i.kt)("h3",{id:"prefixing"},"Prefixing"),(0,i.kt)("p",null,"In case of tracking events like screen view, exception or social interaction event path in the tracker will contain corresponding prefix. You can disable prefixing with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"await PiwikProSdk.setPrefixing(false);\n")),(0,i.kt)("p",null,"Parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"prefixingEnabled: boolean")," ",(0,i.kt)("em",{parentName:"li"},"(required)")," \u2013 flag that determines whether prefixing is enabled")),(0,i.kt)("p",null,"You can also check the prefixing status using the ",(0,i.kt)("inlineCode",{parentName:"p"},"isPrefixingOn")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const currentPrefixingState = await PiwikProSdk.isPrefixingOn();\nconsole.log(currentPrefixingState); // false\n")),(0,i.kt)("p",null,"Returns:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"prefixingEnabled: boolean")," \u2013 current prefixing state.")),(0,i.kt)("h2",{id:"license"},"License"),(0,i.kt)("p",null,"MIT"))}m.isMDXComponent=!0}}]);