"use strict";(self.webpackChunkpiwik_pro=self.webpackChunkpiwik_pro||[]).push([[6467],{29367:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var t=s(85893),i=s(11151);const a={},r="Plain JavaScript",o={id:"js-api/js-api-consent-manager/plain-javascript",title:"Plain JavaScript",description:"Here are some guidelines on how to use our Consent Manager JS API in",source:"@site/docs/js-api/js-api-consent-manager/plain-javascript.md",sourceDirName:"js-api/js-api-consent-manager",slug:"/js-api/js-api-consent-manager/plain-javascript",permalink:"/docs/js-api/js-api-consent-manager/plain-javascript",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/js-api/js-api-consent-manager/plain-javascript.md",tags:[],version:"current",frontMatter:{},sidebar:"jsApiSideBar",previous:{title:"trackSaveChoicesClick()",permalink:"/docs/js-api/js-api-consent-manager/methods/trackSaveChoicesClick()"}},c={},l=[{value:"Installation",id:"installation",level:2},{value:"Methods used for calls",id:"methods-used-for-calls",level:2},{value:"ppms.cm.api",id:"ppmscmapi",level:3},{value:"Syntax",id:"syntax",level:4},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Notes",id:"notes",level:4},{value:"Custom consent form",id:"custom-consent-form",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"plain-javascript",children:"Plain JavaScript"}),"\n",(0,t.jsx)(n.p,{children:"Here are some guidelines on how to use our Consent Manager JS API in\nJava Script."}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsxs)(n.p,{children:["Our JavaScript library can be used only after you installed our\ncontainer's code (or only a tracking code) on your site. The code\ncreates a ",(0,t.jsx)(n.code,{children:"<script>"})," tag that asynchronously loads the JavaScript\nlibrary in the website's body section."]}),"\n",(0,t.jsxs)(n.p,{children:["If you haven't installed the code yet, you can find it directly in Piwik\nPRO in ",(0,t.jsx)(n.strong,{children:"Menu"})," > ",(0,t.jsx)(n.strong,{children:"Administration"})," > ",(0,t.jsx)(n.strong,{children:"Sites & apps"})," >\n",(0,t.jsx)(n.strong,{children:"Installation"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"For more, see our installation guides:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/install-a-tracking-code/",children:"Install a container (with a tracking\ncode)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/google-tag-manager-install-a-container-with-a-tracking-code/",children:"Google Tag Manager: install a container (with a tracking\ncode)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/google-tag-manager-install-a-tracking-code/",children:"Google Tag Manager: install only a tracking\ncode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/instapage-install-a-container-with-a-tracking-code/",children:"Instapage: install a container (with a tracking\ncode)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/no-piwik-pro-tag-manager-install-a-tracking-code/",children:"No Piwik PRO Tag Manager: install a tracking\ncode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/squarespace-install-a-container-with-a-tracking-code/",children:"Squarespace: install a container (with a tracking\ncode)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.piwik.pro/support/getting-started/wordpress-install-a-tracking-code/",children:"WordPress: install a container (with a tracking\ncode)"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"methods-used-for-calls",children:"Methods used for calls"}),"\n",(0,t.jsx)(n.p,{children:"In JavaScript, our methods can be called in this way:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"JS (queue)"}),": After installing our container\u2019s code, it\u2019ll create\nthe ",(0,t.jsx)(n.code,{children:"_paq"})," object (a queue). You can use the ",(0,t.jsx)(n.code,{children:"ppms.cm.api"})," method to\nadd methods to the queue. Our tracker will then access and proceed\nthese methods."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ppmscmapi",children:"ppms.cm.api"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ppms.cm.api"})," method adds methods to the ",(0,t.jsx)(n.code,{children:"_paq"})," object (a queue).\nThe methods are called after the container\u2019s code (or a tracking code)\nloads on a page. They are called synchronously (one by one)."]}),"\n",(0,t.jsx)(n.h4,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"ppms.cm.api(command, ...args)\n"})}),"\n",(0,t.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"command"})," (string, required)",(0,t.jsx)(n.br,{}),"\n","Command name"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"args"})," (optional)",(0,t.jsx)(n.br,{}),"\n","Command arguments. The number of arguments and their function depend on\ncommand."]}),"\n",(0,t.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,t.jsx)(n.p,{children:"Commands are expected to be run asynchronously and return no value.\nType: undefined"}),"\n",(0,t.jsx)(n.h4,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All commands work in the context of the current visitor and website.\nAdditionally, they sometimes require communication with a Piwik\nPRO's server and are asynchronous."}),"\n",(0,t.jsx)(n.li,{children:"Callback functions are used to provide response value or information\nabout errors."}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onSuccess(...args)"})," callback is required, with the exception of\n",(0,t.jsx)(n.code,{children:"openConsentForm"})," command where it is optional."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onFailure(exception)"})," callback is optional and if is specified, any\nerror object occurred will be passed as an argument. If not\nspecified, an error is reported directly on the console output."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"custom-consent-form",children:"Custom consent form"}),"\n",(0,t.jsx)(n.p,{children:"Our Consent Manager JS API lets you build a custom consent form in place\nof the default one."}),"\n",(0,t.jsx)(n.p,{children:"To turn on custom consent form, follow these steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Log in to Piwik PRO."}),"\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Menu"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Administration"})," > ",(0,t.jsx)(n.strong,{children:"Sites & apps"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.strong,{children:"Privacy"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Turn on ",(0,t.jsx)(n.strong,{children:"Ask visitors for consent"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Turn on ",(0,t.jsx)(n.strong,{children:"Use a custom consent form"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>r});var t=s(67294);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);