"use strict";(self.webpackChunkpiwik_pro=self.webpackChunkpiwik_pro||[]).push([[3717],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=m(n),c=i,k=u["".concat(s,".").concat(c)]||u[c]||d[c]||o;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[u]="string"==typeof e?e:i,l[1]=r;for(var m=2;m<o;m++)l[m]=n[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1998:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>m});var a=n(7462),i=(n(7294),n(3905));const o={},l="Piwik PRO Library for Next.js",r={unversionedId:"data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS",id:"data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS",title:"Piwik PRO Library for Next.js",description:"Dedicated Piwik PRO library that helps with implementing Piwik PRO Tag Manager and the Piwik PRO tracking client in Next.js applications.",source:"@site/docs/data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS.md",sourceDirName:"data-collection/web/frameworks",slug:"/data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS",permalink:"/docs/data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data-collection/web/frameworks/Piwik_PRO_Library_for_NextJS.md",tags:[],version:"current",frontMatter:{},sidebar:"dataCollectionSideBar",previous:{title:"Piwik PRO Library for Angular",permalink:"/docs/data-collection/web/frameworks/Piwik_PRO_Library_for_Angular"},next:{title:"Piwik PRO Library for React",permalink:"/docs/data-collection/web/frameworks/Piwik_PRO_Library_for_React"}},s={},m=[{value:"Installation",id:"installation",level:2},{value:"npm",id:"npm",level:3},{value:"Yarn",id:"yarn",level:3},{value:"Basic setup",id:"basic-setup",level:3},{value:"_app.tsx",id:"_apptsx",level:4},{value:"Setup with environmental variables",id:"setup-with-environmental-variables",level:3},{value:".env",id:"env",level:4},{value:"_app.tsx",id:"_apptsx-1",level:4},{value:"Setup with nonce",id:"setup-with-nonce",level:3},{value:"_app.tsx",id:"_apptsx-2",level:4},{value:"Supported methods list and usage",id:"supported-methods-list-and-usage",level:2},{value:"useEffect",id:"useeffect",level:3},{value:"onClick",id:"onclick",level:3},{value:"Analytics",id:"analytics",level:3},{value:"Send page views and virtual page views",id:"send-page-views-and-virtual-page-views",level:4},{value:"User management",id:"user-management",level:4},{value:"Methods",id:"methods",level:5},{value:"Example usage",id:"example-usage",level:5},{value:"Custom Events",id:"custom-events",level:4},{value:"Methods",id:"methods-1",level:5},{value:"Example usage",id:"example-usage-1",level:5},{value:"Site search",id:"site-search",level:4},{value:"Methods",id:"methods-2",level:5},{value:"Example usage",id:"example-usage-2",level:5},{value:"E-commerce",id:"e-commerce",level:4},{value:"Methods",id:"methods-3",level:5},{value:"Example usage",id:"example-usage-3",level:5},{value:"Content Tracking",id:"content-tracking",level:4},{value:"Methods",id:"methods-4",level:5},{value:"Example usage",id:"example-usage-4",level:5},{value:"Downloads and outlinks",id:"downloads-and-outlinks",level:4},{value:"Methods",id:"methods-5",level:5},{value:"Example usage",id:"example-usage-5",level:5},{value:"Goal Conversions",id:"goal-conversions",level:4},{value:"Methods",id:"methods-6",level:5},{value:"Example usage",id:"example-usage-6",level:5},{value:"Custom Dimensions",id:"custom-dimensions",level:4},{value:"Methods",id:"methods-7",level:5},{value:"Example usage",id:"example-usage-7",level:5},{value:"Tag Manager",id:"tag-manager",level:3},{value:"Data layer",id:"data-layer",level:4},{value:"Methods",id:"methods-8",level:5},{value:"Example usage",id:"example-usage-8",level:5}],p={toc:m},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"piwik-pro-library-for-nextjs"},"Piwik PRO Library for Next.js"),(0,i.kt)("p",null,"Dedicated Piwik PRO library that helps with implementing Piwik PRO Tag Manager and the Piwik PRO tracking client in Next.js applications."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#installation"},"Installation"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#npm"},"NPM")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#basic-setup"},"Basic setup")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#setup-with-nonce"},"Setup with nonce")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#supported-methods-list-and-usage"},"Supported methods list and usage"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#analytics"},"Analytics"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#send-page-views-and-virtual-page-views"},"Page views")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#user-management"},"User Management")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#custom-events"},"Custom Events")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#site-search"},"Site search")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#e-commerce"},"E-commerce")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#content-tracking"},"Content Tracking")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#downloads-and-outlinks"},"Downloads and outlinks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#goal-conversions"},"Goal Conversions")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#custom-dimensions"},"Custom Dimensions")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#tag-manager"},"Tag Manager"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#data-layer"},"Data layer"))))))),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("p",null,"To use this package in your project, run the following command."),(0,i.kt)("h3",{id:"npm"},"npm"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @piwikpro/next-piwik-pro\n")),(0,i.kt)("h3",{id:"yarn"},"Yarn"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add @piwikpro/next-piwik-pro\n")),(0,i.kt)("h3",{id:"basic-setup"},"Basic setup"),(0,i.kt)("p",null,"In your Next.js Project, include the default ",(0,i.kt)("inlineCode",{parentName:"p"},"PiwikProProvider")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"_app.tsx")," file. To set up the Piwik PRO Tag Manager container in the app, include the initialization code in your ",(0,i.kt)("inlineCode",{parentName:"p"},"App"),"."),(0,i.kt)("p",null,"In the arguments, pass your account name and your container id as parameters (marked 'accountName' and 'containerId' in the example below)."),(0,i.kt)("h4",{id:"_apptsx"},"_","app.tsx"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import PiwikProProvider from '@piwikpro/next-piwik-pro'\n\nfunction App({ Component, pageProps }: AppProps) {\n  return (\n    <>\n      <PiwikProProvider\n        accountName='accountName'\n        containerId='43e4bca4-e220-43df-acfc-40fef7e25105'\n      >\n        <Component {...pageProps} />\n      </PiwikProProvider>\n    </>\n  )\n}\n")),(0,i.kt)("h3",{id:"setup-with-environmental-variables"},"Setup with environmental variables"),(0,i.kt)("p",null,"If you plan to use environmental variables to config your Piwik account you can do it with adding them to your ",(0,i.kt)("inlineCode",{parentName:"p"},".env")," file. Remember that variables to be visible in component need to be named with ",(0,i.kt)("inlineCode",{parentName:"p"},"NEXT_PUBLIC_")," prefix, in other cases they will be visible only in Node context but not in Next."),(0,i.kt)("h4",{id:"env"},".env"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"NEXT_PUBLIC_ACCOUNT_NAME=accountName\nNEXT_PUBLIC_CONTAINER_ID=43e4bca4-e220-43df-acfc-40fef7e25105\n")),(0,i.kt)("h4",{id:"_apptsx-1"},"_","app.tsx"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"function App({ Component, pageProps }: AppProps) {\n  return (\n    <>\n      <PiwikProProvider\n        accountName={process.env.NEXT_PUBLIC_ACCOUNT_NAME}\n        containerId={process.env.NEXT_PUBLIC_CONTAINER_ID}\n      >\n        <Component {...pageProps} />\n      </PiwikProProvider>\n    </>\n  )\n}\n")),(0,i.kt)("h3",{id:"setup-with-nonce"},"Setup with nonce"),(0,i.kt)("p",null,"The nonce attribute is useful to allow-list specific elements, such as a particular inline script or style elements. It can help you to avoid using the CSP unsafe-inline directive, which would allow-list all inline scripts or styles."),(0,i.kt)("p",null,"If you want your nonce to be passed to the script, pass it as the third argument when calling the script initialization method."),(0,i.kt)("h4",{id:"_apptsx-2"},"_","app.tsx"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import PiwikProProvider from '@piwikpro/next-piwik-pro'\n\nfunction App({ Component, pageProps }: AppProps) {\n  return (\n    <>\n      <PiwikProProvider\n        accountName='accountName'\n        containerId='43e4bca4-e220-43df-acfc-40fef7e25105'\n        nonce='nonce-string'\n      >\n        <Component {...pageProps} />\n      </PiwikProProvider>\n    </>\n  )\n}\n")),(0,i.kt)("h2",{id:"supported-methods-list-and-usage"},"Supported methods list and usage"),(0,i.kt)("p",null,"To use methods in your page you need to include ",(0,i.kt)("inlineCode",{parentName:"p"},"usePiwikPro")," from the library."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { usePiwikPro } from '@piwikpro/next-piwik-pro'\n")),(0,i.kt)("p",null,"Then you need to define modules you want to use and initialize it from previously included ",(0,i.kt)("inlineCode",{parentName:"p"},"usePiwikPro")," context. In example below you can see the initialization of the ",(0,i.kt)("inlineCode",{parentName:"p"},"PageViews")," module."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { PageViews } = usePiwikPro()\n")),(0,i.kt)("p",null,"You can use those methods in all hooks and props for ex. ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"onClick"),"."),(0,i.kt)("h3",{id:"useeffect"},"useEffect"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"useEffect(() => {\n  PageViews.trackPageView('optional title')\n}, [])\n")),(0,i.kt)("h3",{id:"onclick"},"onClick"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"<button\n  onClick={() => {\n    CustomEvent.trackEvent('Post', pageData.title)\n  }}\n>\n  CustomEvent.trackEvent button\n</button>\n")),(0,i.kt)("p",null,"Below you can view the sample usage of the avialable methods from modules."),(0,i.kt)("h3",{id:"analytics"},"Analytics"),(0,i.kt)("h4",{id:"send-page-views-and-virtual-page-views"},"Send page views and virtual page views"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { PageViews } = usePiwikPro()\n\nPageViews.trackPageView('optional title')\n")),(0,i.kt)("h4",{id:"user-management"},"User management"),(0,i.kt)("p",null,"Collection of methods to handle users and visitors data through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UserManagement.setUserId(userID)")," - Sets user ID, which will help identify a user of your application across many devices and browsers.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"userID")," (string) \u2013 Required Non-empty, unique ID of a user in application"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UserManagement.resetUserId()")," - Clears previously set ",(0,i.kt)("inlineCode",{parentName:"li"},"userID"),", e.g. when visitor logs out."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UserManagement.getUserId()")," - Returns currently used ",(0,i.kt)("inlineCode",{parentName:"li"},"userID")," value (set with ",(0,i.kt)("inlineCode",{parentName:"li"},"setUserId()"),")."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UserManagement.getVisitorId()")," - Returns 16-character hex ID of the visitor."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UserManagement.getVisitorInfo()")," - Returns visitor information. Return type ",(0,i.kt)("inlineCode",{parentName:"li"},"string[]"),". String array with the following visitor info:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[0]"),' - new visitor flag indicating new, ("1") or returning ("0") visitor'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[1]")," - visitor ID (16-character hex number)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[2]")," - first visit timestamp (UNIX epoch time)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[3]"),' - previous visit count ("0" for first visit)'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[4]")," - current visit timestamp (UNIX epoch time)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[5]"),' - last visit timestamp (UNIX epoch time or "" if N/A)'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[6]"),' - last e-commerce order timestamp (UNIX epoch time or "" if N/A)')))),(0,i.kt)("h5",{id:"example-usage"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { UserManagement } = usePiwikPro()\n\nUserManagement.setUserId('UserId')\n\nUserManagement.resetUserId()\n")),(0,i.kt)("p",null,"Some of the methods are getting data from the API and they need to be called asynchronously. They provide data that can be shown on the page. This need to be done with defining async function in your hook body and setting the state of the variable. Like on example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { UserManagement } = usePiwikPro()\n\nconst [userId, setUserId] = useState<string>('')\nconst [visitorId, setVisitorId] = useState<string>('')\nconst [visitorInfo, setVisitorInfo] = useState<any>('')\n\nconst callAsyncMethods = async () => {\n  const uId = await UserManagement.getUserId()\n  setUserId(uId)\n\n  const vId = await UserManagement.getVisitorId()\n  setVisitorId(vId)\n\n  const vInfo = await UserManagement.getVisitorInfo()\n  setVisitorInfo(vInfo)\n}\n\ncallAsyncMethods()\n")),(0,i.kt)("p",null,"You have access to those variables in you page body. Example access below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<p><code>UserManamement.getUserId()</code> - {userId}</p>\n<p><code>UserManamement.getVisitorId()</code> - {visitorId}</p>\n<p>\n  <code>UserManamement.getVisitorInfo()</code> -{' '}\n  {JSON.stringify(visitorInfo)}\n</p>\n")),(0,i.kt)("h4",{id:"custom-events"},"Custom Events"),(0,i.kt)("p",null,"Collection of methods to handle custom events, not described in the other categories."),(0,i.kt)("h5",{id:"methods-1"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CustomEvent.trackEvent(category, action[, name[, value[, dimensions]]])")," - Tracks custom event, e.g. when visitor interacts with the page.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"category (string)")," \u2013 Required Event category"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"action (string)")," \u2013 Required Event action"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name (string)")," \u2013 Optional Event name"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value (number)")," \u2013 Optional Event value")))),(0,i.kt)("h5",{id:"example-usage-1"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { CustomEvent } = usePiwikPro()\n\nCustomEvent.trackEvent('Post', pageData.title)\n")),(0,i.kt)("h4",{id:"site-search"},"Site search"),(0,i.kt)("p",null,"Collection of methods to track site search data, through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-2"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SiteSearch.trackSiteSearch(keyword[, category[, resultCount[, dimensions]]])")," - Tracks search requests on a website.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"keyword (string)")," \u2013 Required What keyword the visitor entered into the search box"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"category (string|Array<string>)")," \u2013 Optional Category selected in the search engine"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"searchCount (number)")," \u2013 Optional The number of search results shown"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dimensions (object)")," \u2013 Optional Custom dimensions to pass along with the site search event")))),(0,i.kt)("h5",{id:"example-usage-2"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { SiteSearch } = usePiwikPro()\n\nSiteSearch.trackSiteSearch('keyword', 'category', 5)\n")),(0,i.kt)("h4",{id:"e-commerce"},"E-commerce"),(0,i.kt)("p",null,"Collection of methods to handle e-commerce events through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-3"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.addEcommerceItem(productSKU[, productName[, productCategory[, productPrice[, productQuantity]]]])")," - Adds a product to a virtual shopping cart. If a product with the same SKU is in the cart, it will be removed first. Does not send any data to the Collecting & Processing Pipeline."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productSKU (string)")," \u2013 Required Product stock-keeping unit"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productName (string)")," \u2013 Optional Product name"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productCategory (string|Array<string>)")," \u2013 Optional Product category or an array of up to 5 categories"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productPrice (number)")," \u2013 Optional Product price"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productQuantity (number)")," \u2013 Optional The number of units"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.removeEcommerceItem(productSKU)")," - Removes a product with the provided SKU from a virtual shopping cart. If multiple units of that product are in the virtual cart, all of them will be removed. Does not send any data to the Collecting & Processing Pipeline."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productSKU (string)")," \u2013 Required stock-keeping unit of a product to remove"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.clearEcommerceCart()")," - Removes all items from a virtual shopping cart. Does not send any data to the Collecting & Processing Pipeline.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.getEcommerceItems()")," - Returns a copy of items from a virtual shopping cart. Does not send any data to the Collecting & Processing Pipeline. Returns: Object containing all tracked items (format: ",(0,i.kt)("inlineCode",{parentName:"p"},"Object<productSKU, Array[productSKU, productName, productCategory, price, quantity]>"),")")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.setEcommerceView([productSKU[, productName[, productCategory[, productPrice]]]])")," - Tracks product or category view. Must be followed by a page view."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productSKU (string)")," \u2013 Optional Product stock-keeping unit"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productName (string)")," \u2013 Optional Product name"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productCategory (string|Array<string>)")," \u2013 Optional Category or an array of up to 5 categories"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"productPrice (number)")," \u2013 Optional Product price"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.trackEcommerceCartUpdate(cartAmount)")," - Tracks items present in a virtual shopping cart (registered with addEcommerceItem)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cartAmount")," (number) \u2013 Required The total value of items in the cart"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"eCommerce.trackEcommerceOrder(orderID, orderGrandTotal[, orderSubTotal[, orderTax[, orderShipping[, orderDiscount]]]])")," - Tracks a successfully placed e-commerce order with items present in a virtual cart (registered using addEcommerceItem)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderID (string)")," \u2013 Required String uniquely identifying an order"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderGrandTotal (number)")," \u2013 Required Order Revenue grand total - tax, shipping and discount included"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderSubTotal (number)"),"\u2013 Optional Order subtotal - without shipping"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderTax (number)"),"\u2013 Optional Order tax amount"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderShipping (number)")," \u2013 Optional Order shipping cost"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"orderDiscount (number)")," \u2013 Optional Order discount amount")))),(0,i.kt)("h5",{id:"example-usage-3"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { eCommerce } = usePiwikPro()\n\neCommerce.addEcommerceItem('1', 'ProductName', 'Items', 69, 1)\n\neCommerce.removeEcommerceItem('1')\n\neCommerce.trackEcommerceOrder('id', 50)\n\neCommerce.trackEcommerceCartUpdate(2)\n\neCommerce.setEcommerceView('1')\n\neCommerce.clearEcommerceCart()\n")),(0,i.kt)("p",null,"Some of the methods are getting data from the API and they need to be called asynchronously. They provide data that can be shown no the page. This need to be done with defining async function in your hook body and setting the state of the variable. Like on example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { eCommerce } = usePiwikPro()\n\nconst [eCommerceItems, setECommerceInfo] = useState<any>('')\n\nconst callAsyncMethods = async () => {\n  const ecItem = await eCommerce.getEcommerceItems()\n  setECommerceInfo(ecItem)\n}\n\ncallAsyncMethods()\n")),(0,i.kt)("p",null,"You have access to those variables in you page body. Example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<p>\n  <code>eCommerce.getEcommerceItems()</code> -{' '}\n  {JSON.stringify(eCommerceItems)}\n</p>\n")),(0,i.kt)("h4",{id:"content-tracking"},"Content Tracking"),(0,i.kt)("p",null,"Collection of methods to track impressions through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-4"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ContentTracking.trackContentImpression(contentName, contentPiece, contentTarget)")," - Tracks manual content impression event."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentName (string)")," \u2013 Required Name of a content block"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentPiece (string)")," \u2013 Required Name of the content that was displayed (e.g. link to an image)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentTarget (string)")," \u2013 Required Where the content leads to (e.g. URL of some external website)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ContentTracking.trackContentInteraction(contentInteraction, contentName, contentPiece, contentTarget)")," - Tracks manual content interaction event."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentInteraction (string)"),' \u2013 Required Type of interaction (e.g. "click")'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentName (string)")," \u2013 Required Name of a content block"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentPiece")," (string) \u2013 Required Name of the content that was displayed (e.g. link to an image)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contentTarget (string)")," \u2013 Required Where the content leads to (e.g. URL of some external website)")))),(0,i.kt)("h5",{id:"example-usage-4"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { ContentTracking } = usePiwikPro()\n\nContentTracking.trackContentImpression(\n  'contentName',\n  'contentPiece',\n  'contentTarget'\n)\n\nContentTracking.trackContentInteraction(\n  'contentInteracion',\n  'contentName',\n  'contentPiece',\n  'contentTarget'\n)\n")),(0,i.kt)("h4",{id:"downloads-and-outlinks"},"Downloads and outlinks"),(0,i.kt)("p",null,"Collection of methods to manually tracks outlink or download events through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-5"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.trackLink(linkAddress, linkType[, dimensions[, callback]])")," - Manually tracks outlink or download event with provided values."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"linkAddress (string)")," \u2013 Required URL address of the link"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"linkType (string)"),' \u2013 Required Type of the link, "link" for outlink, "download" for download'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dimensions (object)")," \u2013 Optional Custom dimensions to pass along with the link event"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback (function)")," \u2013 Optional Function that should be called after tracking the link"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.enableLinkTracking([trackMiddleAndRightClicks])")," - Enables automatic link tracking. By default, left, right and middle clicks on links will be treated as opening a link. Opening a link to an external site (different domain) creates an outlink event. Opening a link to a downloadable file creates a download event."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"trackMiddleAndRightClicks (boolean)")," \u2013 Optional Whether to treat middle and right clicks as opening a link. The default value is true."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.setLinkClasses(classes)")," - Sets a list of class names that indicate whether a link is an outlink and not download."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"classes (Array<string>)")," \u2013 Required CSS class name or an array of class names"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.setDownloadClasses(classes)")," - Sets a list of class names that indicate whether a list is a download and not an outlink."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"classes (Array<string>)")," \u2013 Required CSS class name or an array of class names"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.addDownloadExtensions(extensions)"),"\nAdds new extensions to the download extensions list."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"extensions (Array<string>)")," \u2013 Required List of extensions to be added as an array, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},'["7z","apk","mp4"]'),"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.removeDownloadExtensions(extensions)")," - Removes extensions from the download extensions list."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"extensions (Array<string>)")," \u2013 Required List of extensions to remove as an array, e.g. ",'["zip", "rar"]',"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.setLinkTrackingTimer(milliseconds)")," - When a visitor produces an events and closes the page immediately afterwards, e.g. when opening a link, the request might get cancelled. To avoid loosing the last event this way, JavaScript Tracking Client will lock the page for a fraction of a second (if wait time hasn\u2019t passed), giving the request time to reach the Collecting & Processing Pipeline. ",(0,i.kt)("inlineCode",{parentName:"p"},"setLinkTrackingTimer")," allows to change the default lock/wait time of 500ms."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"milliseconds (number)")," \u2013 Required How many milliseconds a request needs to reach the Collecting & Processing Pipeline."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"DownloadAndOutlink.setIgnoreClasses(classes)")," - Set a list of class names that indicate a link should not be tracked."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"classes (Array<string>)")," \u2013 Required CSS class name or an array of class names")))),(0,i.kt)("h5",{id:"example-usage-5"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { DownloadAndOutlink } = usePiwikPro()\n\nDownloadAndOutlink.trackLink('http://localhost:3000', 'link')\n\nDownloadAndOutlink.enableLinkTracking(true)\n\nDownloadAndOutlink.setLinkClasses(['this-is-an-outlink'])\n\nDownloadAndOutlink.setDownloadClasses(['this-is-a-download'])\n\nDownloadAndOutlink.addDownloadExtensions(['zip', 'rar'])\n\nDownloadAndOutlink.removeDownloadExtensions(['doc', 'xls'])\n\nDownloadAndOutlink.setLinkTrackingTimer(10)\n\nDownloadAndOutlink.setIgnoreClasses(['do-not-track'])\n")),(0,i.kt)("p",null,"Some of the methods are getting data from the API and they need to be called asynchronously. They provide data that can be shown no the page. This need to be done with defining async function in your hook body and setting the state of the variable. Like on example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { DownloadAndOutlink } = usePiwikPro()\n\nconst [linkTrackingTimer, setLinkTrackingTimer] = useState<string>('')\n\nconst callAsyncMethods = async () => {\n  const lTrackingTimer = await DownloadAndOutlink.getLinkTrackingTimer()\n  setLinkTrackingTimer(lTrackingTimer)\n}\n")),(0,i.kt)("p",null,"You have access to those variables in you page body. Example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<p>\n  <code>DownloadAndOutlink.getLinkTrackingTimer()</code> -{' '}\n  {linkTrackingTimer}\n</p>\n")),(0,i.kt)("h4",{id:"goal-conversions"},"Goal Conversions"),(0,i.kt)("p",null,"Collection of methods to manually tracks goal conversions through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-6"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GoalConversions.trackGoal(goalID[, conversionValue[, dimensions]])")," - Tracks manual goal conversion. ",(0,i.kt)("inlineCode",{parentName:"li"},"goalID (number|string)")," \u2013 Required Goal ID (integer or UUID), ",(0,i.kt)("inlineCode",{parentName:"li"},"conversionValue (number)")," \u2013 Optional Conversion value (revenue), ",(0,i.kt)("inlineCode",{parentName:"li"},"dimensions (object)")," \u2013 Optional Custom dimensions to pass along with the conversion")),(0,i.kt)("h5",{id:"example-usage-6"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { GoalConversions } = usePiwikPro()\n\n// function trackGoal(goalId: string | number, conversionValue: number, dimensions?: Object | undefined): void\nGoalConversions.trackGoal(1, 30)\n")),(0,i.kt)("h4",{id:"custom-dimensions"},"Custom Dimensions"),(0,i.kt)("p",null,"Collection of methods to manage custom dimentsions through the Piwik PRO API."),(0,i.kt)("h5",{id:"methods-7"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"CustomDimensions.setCustomDimensionValue(customDimensionID, customDimensionValue")," - Sets a custom dimension to be used later."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensionID (number)")," \u2013 Required ID of a custom dimension, ",(0,i.kt)("inlineCode",{parentName:"li"},"customDimensionValue (string)")," \u2013 Required Value of a custom dimension"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"CustomDimensions.deleteCustomDimension(customDimensionID)")," - Removes a custom dimension with the specified ID."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensionID (number)")," \u2013 Required ID of a custom dimension"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"CustomDimensions.getCustomDimensionValue(customDimensionID)"),"- Returns the value of a custom dimension with the specified ID. Returns: Value set with ",(0,i.kt)("inlineCode",{parentName:"p"},"setCustomDimensionValue")," (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"loginStatus"),"). Return type: ",(0,i.kt)("inlineCode",{parentName:"p"},"string")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customDimensionID (number)"),"\u2013 Required ID of a custom dimension.")))),(0,i.kt)("h5",{id:"example-usage-7"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { CustomDimensions } = usePiwikPro()\n\nCustomDimensions.setCustomDimensionValue('customDimensionId', 'value')\n\nCustomDimensions.getCustomDimensionValue('customDimensionId')\n\nCustomDimensions.deleteCustomDimension('customDimensionId')\n")),(0,i.kt)("p",null,"Some of the methods are getting data from the API and they need to be called asynchronously. They provide data that can be shown on the page. This need to be done with defining async function in your hook body and setting the state of the variable. Like on example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { UserManagement } = usePiwikPro()\n\nconst [customDimValue, setCustomDimValue] = useState<string>('')\n\nconst callAsyncMethods = async () => {\n  const cDimValue = await CustomDimensions.getCustomDimensionValue(12)\n  setCustomDimValue(cDimValue)\n}\n\ncallAsyncMethods()\n")),(0,i.kt)("p",null,"You have access to those variables in you page body. Example access below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<p>\n  <code>CustomDimensions.getCustomDimensionValue()</code> - {customDimValue}\n</p>\n")),(0,i.kt)("h3",{id:"tag-manager"},"Tag Manager"),(0,i.kt)("h4",{id:"data-layer"},"Data layer"),(0,i.kt)("p",null,"A data layer is a data structure on your site or app where you can store data and access it with tools like Tag Manager. You can include any data you want in your data layer."),(0,i.kt)("h5",{id:"methods-8"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DataLayer.push(data)")," - Adds an event to a data layer.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data")," - Required data value without type.")))),(0,i.kt)("h5",{id:"example-usage-8"},"Example usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const { DataLayer } = usePiwikPro()\n\nDataLayer.push('data')\n")))}d.isMDXComponent=!0}}]);